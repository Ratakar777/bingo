(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[797],{54997:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/stake",function(){return n(96870)}])},96870:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return w}});var a=n(85893),s=n(14838),i=n(47568),r=n(20414),c=n(2894),l=n(56334),d=n(69077),o=n(9008),u=n.n(o),f=n(67294),x=n(63449),m=n(5337),h=n(26399),N=n(66447),v=n(8919),b=n(20497),g=n.n(b),j=function(){var e="0x7caF5BcFD3BDf20b8cF2dC552cf8AbD34DC3E430",t="0xb262a485d98D8e19175818D47453e7812cA255A8",n=l.p.id,s=(0,N.Z)(),o=(0,d.mA)().address,b=(0,d.qL)().disconnect,j=(0,d.LN)().chain,w=(0,d.g0)().switchNetworkAsync,p=(0,f.useState)(!1),k=p[0],_=p[1],C=(0,d.do)({address:e,abi:x.zW,functionName:"lastRewardAmount"}),I=C.data,D=C.refetch,W=(0,f.useMemo)(function(){return Number(null!=I?I:0)/1e18},[I]),y=(0,d.KQ)({address:e,token:t,chainId:n}),B=y.data,G=y.refetch,M=(0,f.useMemo)(function(){var e,t=Number(null!==(e=null==B?void 0:B.formatted)&&void 0!==e?e:0)-W;return t>=0?t:0},[W,B]),F=(0,d.do)({address:e,abi:x.zW,functionName:"DURATION"}).data,O=(0,f.useMemo)(function(){return 1e3*Number(F)},[F]),Z=(0,d.do)({address:e,abi:x.zW,functionName:"currentUnlockEndTimestamp"}),A=Z.data;Z.refetch;var S=(0,f.useMemo)(function(){return 1e3*Number(A)},[A]),E=(0,f.useMemo)(function(){return 31536e6*W/(M*O)*100+5},[W,M,O]),L=(0,d.do)({address:e,abi:x.zW,functionName:"getPricePerFullShare"}),T=L.data,z=L.refetch,P=(0,d.do)({address:e,abi:x.zW,functionName:"balanceOf",args:[o]}),X=P.data,R=P.refetch,$=(0,f.useMemo)(function(){var e=Number(null!=T?T:0)/1e18;return Number(null!=X?X:0)/1e18*e},[X,T]),U=(0,d.do)({address:t,abi:x.Wo,functionName:"balanceOf",args:[o]}),q=U.data,K=U.refetch,Y=(0,d.do)({address:t,abi:x.Wo,functionName:"allowance",args:[o,e]}),Q=Y.data,H=Y.refetch,J=(0,f.useMemo)(function(){return Number(Q)/1e18},[Q]),V=(0,f.useMemo)(function(){return Number(q)/1e18},[q]);(0,f.useEffect)(function(){_(!0);var e=setInterval(ee,1e4),t=setInterval(et,1e3);return function(){clearInterval(e),clearInterval(t)}},[]);var ee=function(){D(),G(),R(),K(),H()},et=function(){z()},en=function(e){return e>=1e6?(e/1e6).toFixed(2)+"M":e>=1e3?(e/1e3).toFixed(2)+"K":Math.round(e)},ea=(0,d.GG)({address:t,abi:x.Wo,functionName:"approve",chainId:n}),es=ea.write,ei=ea.data,er=ea.isLoading,ec=(0,d.BX)({hash:null==ei?void 0:ei.hash,confirmations:2,onSuccess:function(){ee(),eb(!0)}}).isLoading,el=(0,d.GG)({address:e,abi:x.zW,functionName:"stake",chainId:n}),ed=el.write,eo=el.data,eu=el.isLoading,ef=(0,d.BX)({hash:null==eo?void 0:eo.hash,onSuccess:function(){return ee}}).isLoading,ex=(0,d.GG)({address:e,abi:x.zW,functionName:"withdraw",chainId:n}),em=ex.write,eh=ex.data,eN=ex.isLoading,ev=(0,d.BX)({hash:null==eh?void 0:eh.hash,onSuccess:function(){return ee}}).isLoading,eb=(0,f.useCallback)((0,i.Z)(function(){var t,a=arguments;return(0,r.__generator)(this,function(s){switch(s.label){case 0:if(t=a.length>0&&void 0!==a[0]&&a[0],!((null==j?void 0:j.id)!==n&&w))return[3,2];return[4,w(n)];case 1:s.sent(),s.label=2;case 2:if(!V)return[2];if(!t&&J<V)return[2,es({args:[e,q]})];return ed({args:[q]}),[2]}})}),[J,V,j,w]),eg=(0,f.useCallback)((0,i.Z)(function(){return(0,r.__generator)(this,function(e){switch(e.label){case 0:if(!((null==j?void 0:j.id)!==n&&w))return[3,2];return[4,w(n)];case 1:e.sent(),e.label=2;case 2:if(!X)return[2];return em({args:[X]}),[2]}})}),[X,j,w]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(u(),{children:[(0,a.jsx)("title",{children:h.Z.generateTitle("Staking")}),(0,a.jsx)("meta",{property:"og:title",content:h.Z.generateTitle("Staking")},"og_title"),(0,a.jsx)("meta",{property:"twitter:title",content:h.Z.generateTitle("Staking")},"twitter_title")]}),k&&(0,a.jsx)("div",{className:"flex-1 flex flex-col justify-center",children:(0,a.jsxs)("div",{className:g().block,children:[(0,a.jsxs)("div",{className:"flex md:flex-row flex-col items-center justify-center gap-4",children:[(0,a.jsx)("img",{className:"md:h-12 h-24",src:"/assets/coin.png",alt:"BINGO"}),(0,a.jsx)("div",{className:"md:text-[44px] text-4xl font-bold leading-tight text-center",children:"Staking"})]}),(0,a.jsxs)("div",{className:"mt-10 w-full flex md:flex-row flex-col justify-around md:gap-20 gap-4 px-6 py-2 bg-white/40 rounded-xl",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-2 items-center",children:[(0,a.jsx)("div",{className:"",children:"Total staked"}),(0,a.jsxs)("div",{className:"font-bold text-2xl",children:[en(M)," $BINGO"]})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-2 items-center",children:[(0,a.jsx)("div",{className:"",children:"Rewards"}),(0,a.jsxs)("div",{className:"font-bold text-2xl",children:[en(W)," $BINGO"]})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-2 items-center",children:[(0,a.jsx)("div",{className:"",children:"Period ends"}),(0,a.jsx)("div",{className:"font-bold text-2xl",children:(0,m.p)(S,"ago")})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-2 items-center",children:[(0,a.jsx)("div",{className:"",children:"Average APR"}),(0,a.jsxs)("div",{className:"font-bold text-2xl",children:[Math.round(E),"%"]})]})]}),(E<10||S<+Date.now())&&(0,a.jsx)("div",{className:"mt-4 text-sm text-emerald-800 text-center",children:"Unstake not required, rewards for the new epoch will be added soon! \uD83D\uDC0B"}),!s&&(0,a.jsx)("div",{className:"mt-14",children:(0,a.jsx)(c.x3.Custom,{children:function(e){var t=e.show;return(0,a.jsx)(v.Z,{onClick:t,children:"Connect wallet"})}})}),s&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"mt-10 text-2xl font-semibold",children:"Your stake:"}),(0,a.jsxs)("div",{className:"mt-8 text-[50px] font-bold text-center leading-[54px]",children:[$.toFixed(2)," $BINGO"]}),(0,a.jsx)("div",{className:"mt-10 text-xl",children:"You can stake:"}),(0,a.jsxs)("div",{className:"mt-2 text-xl font-bold",children:[V.toFixed(0)," $BINGO"]}),(0,a.jsxs)("div",{className:"mt-10 md:w-auto w-full flex md:flex-row flex-col gap-6",children:[(0,a.jsx)(v.Z,{onClick:function(){return eb()},disabled:!V||eu||er||ef||ec,children:eu||er||ef||ec?"Waiting...":"Deposit"}),(0,a.jsx)(v.Z,{onClick:function(){return eg()},disabled:!$||eN||ev,children:eN||ev?"Waiting...":"Withdraw"})]}),(0,a.jsx)("div",{className:"mt-4 -mb-8",children:(0,a.jsx)("button",{className:"text-sm underline opacity-60 hover:opacity-100 transition-opacity",onClick:function(){return b()},children:"Change wallet"})})]})]})})]})},w=function(){return(0,a.jsx)(s.Z,{children:(0,a.jsx)(j,{})})}},20497:function(e){e.exports={block:"staking_block__Dv5sy"}}},function(e){e.O(0,[966,347,584,774,888,179],function(){return e(e.s=54997)}),_N_E=e.O()}]);